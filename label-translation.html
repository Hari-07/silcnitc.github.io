<!Doctype html>
<html lang="en">
    <head>
        <title>Label Translation</title>
        <meta charset="UTF-8">
        <!--<link rel="stylesheet" href="css/bootstrap.min.css">-->
        <link rel="stylesheet" href="css/style_new.css">
        <script src="js/jquery-1.12.1.min.js" charset="utf-8"></script>
        <link rel="stylesheet" href="js/embed-2cd369fa1c0830bd3aa06c21d4f14a13e060d2d31bbaae740f4af4.css"><div id="gist28627206" class="gist">
        <link rel="stylesheet" href="js/embed-cbe5b40fa72b0964f90d4919c2da8f8f94d7c9f6c2aa49c07f6fa3.css"><div id="gist28627206" class="gist">
        <script src="js/bootstrap.min.js" charset="utf-8"></script>
    </head>
    <div class="container">
        <header id="navtop">
            <a href="index.html" class="logo fleft"><img src="img/logo.png" alt=""></a>
            <nav class="fright">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About</a></li>
        			    <li><a href="#">Help</a></li>
        			    <li><a href="#">Code</a></li>
        			    <!-- <li><a href="roadmap.html">Roadmap</a></li> -->
        			    <li><a href="documentation.html" class="navactive">Documentation</a></li>
                </ul>
            </nav>
        </header>
        <div class="Services-page main grid-wrap">
            <header class="grid col-full">
                <hr/>
                <p class="fleft">Label Translation</p>
                <br>
                <br>
            </header>
            <aside class="grid col-one-quarter mq2-col-full sticky_sidebar" style="position: static;">
              <menu>
                <ul>
                  <li><a class="sec" href="#nav-introduction">Introduction</a></li>
                  <li><a class="sec" href="#nav-illustration">Illustration</a></li>
                </ul>
              </menu>
               <a class="button" href="">Download as PDF</a>
            </aside>
            <section class="grid col-three-quarters mq2-col-full">
                <div class="grid-wrap">
                <article class="grid col-full" id="nav-introduction">
                    <h2>Introduction</h2>
<!--                     <p>
                        The code area of the memory where the function's code is not decided by the compiler during analysis phase. So to solve this issue, compiler generates psuedo addresses for all labels. All calls to the function will be translated to an assembly level call to this pseudo address. Label translation is done to assign the correct addresses.
                    </p>
                    <p>
                        While converting the ExpL program to assembly level program, labels are generated for functions, jump statements in iterative and conditional statements ('if' and 'while'). The psuedo addresses generated for each function is stored in the binding field of each function\'s global symbol table entry.
                    </p>
                    <p>
                        A two-pass of the file is done to replace the pseudo address with the correct addresses.
                        <ol>
                            <li>In the first pass, the correct adrress of each label is found out and store the mapping (say, in an array).</li>
                            <li>In the second pass, all the call and jumps statements with pseudo addresses, i.e, labels are replaced by the correct addresses obtained from the mapping.</li>
                        </ol>
                    </p>-->
                    <p>
                        Labels are generated while translating the high level program constructs such as if-conditional, while loops and functions into target machine code. The XSM simulator stipulates that the target machine code should not contain any labels. So the compiler writer need to write a program to translate all the labels with the corresponding memory addresses compatible with the memory layout of the XSM simulator.This conversion is called the Label translation.
                    </p>
                    <p>
                        The input to the label translator program is the machine code with labels generated after codegen() section. The output is the target machine code without the labels ( replaced with corresponding addresses ).
                    </p>
                    <p>
                        The main idea in writing Label translater program is provided below.<br>
                        This stage mainly comprises of two parts.
                        <ul>
                            <li id="otis">1. The input ( machine code with labels ) is parsed and a table in which the labels are mapped with their corresponding addresses is created.</li>

                            <li id="otis">2. Parse the input again and replace all the labels with their corresponding addresses by looking into the table created above.</li>
                        </ul>
                    </p>
                </article>
                <article class="grid col-full" id="nav-illustration">
                    <h2>Illustration</h2>
                    <p>
                        The above procedure is demonstrated with the help of a program snippet.
                    </p>
                    <div  class="col-one-half">
                        <script src="js/36a210c1c92cd7ac6d45eb119b4d0020.js"></script>
                    </div>
                    <div class="grid col-full">
                        <p>
                            The code generated after the codegen() phase is shown in the <a href="#fig1"> figure 1</a> ( It consists of labels ).
                        </p>
                        <div class="fleft col-one-third" id="fig1">
                            <p>
                                Figure 1
                                <script src="js/cbc271f4cff409923ac1989a9433bdfe.js"></script>
                            </p>
                        </div>
                        <div style="padding-right: 15em" class="fright col-one-third" id="fig2">
                            <p>
                                Figure 2
                            </p>
                            <script src="js/d2de8b9cd8a88a5054c9ead9e697e99a.js"></script>
                        </div>
                    </div>
                    <div>
                        <p>
                            All the labels preceeded by the semicolon (:) are to be recognized in the first parse and the memory address of this instruction need to be stored in the table along with the label because the next instruction which is the starting instruction under this label will be at this address after removing the label. Note that this parse is only to construct the table.
                        </p>
                        <p>
                            The table constructed after the first parse of the above code is shown below.
                            <script type="text/javascript"></script>
                        </p>
                        <p>
                            The second parse is done on the input and the labels are translated to their address using the above table and the target machine code is generated. According to XSM instruction set, the only <a href="abi.html#nav-XSM-instruction-set"> machine instructions</a> which contain labels are : JMP, JZ, JNZ and CALL. Only these instructions need to be recognised by the parser and the labels present in these instructions are to be replaced with the respective memory addresses ( using the table ). All the labels preceeded by the semicolons (:) are to be removed in this parse.
                        </p>
                        <p>
                            The target code after the label translation is shown in the <a href="#fig2"> figure 2</a>.
                        </p>
                        <hr>
                    </div>
                    <div>
                        <h3>How to implement the parser?</h3>
                        <p>
                            The above parser can be implemented using a single Lex program.The following functions provided by Lex can be useful while implementing the parser :
                            <ul>
                                <li id="otis">1. <b>yyless(k)</b> : Returns the first k characters in yytext(lexeme).</li>
                                <li id="otis">2. <b>yytext+k</b> : ignores the first k characters in yytext(lexeme).</li>
                            </ul>
                        </p>
                    </div>
                    <!-- <script src="https://gist.github.com/vishnupriyam/6cde145e400e15cfda5f1a65366a264f.js"></script> -->
                    <!-- <script src="js/6ce685d686f903d3e976dd8b20b11763.js"></script> -->
                    <!-- <p>
                        The XSM instructions for the above while code (lines 11-12) will be as follows:
                    </p> -->
                    
                    <!-- <script src="js/330a763b31980649846c3a2cbb103113.js"></script> -->

                </article>
            </section>
        </div>
    </div>
</html>
