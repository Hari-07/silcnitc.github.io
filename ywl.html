<!DOCTYPE html>
<html lang="en">
<head>
<title>SILC | LEX-YACC</title>
<meta charset="UTF-8">
<link rel="stylesheet" href="css/style.css">
</head>
<body>
 <header class="center clearfix" id="navtop"> <a href="index.html" class="logo fleft"><img src="img/logo.png" alt=""></a>
  <nav class="fright">
   <ul>
     <li><a href="index.html" >Home</a></li>
    <li><a href="about.html">About</a></li>
    <li><a href="documentation.html" class="navactive">Documentation</a></li>
     <li><a href="uc.html">Code</a></li>
    <li><a href="uc.html">Roadmap</a></li>
   </ul>
  </nav>
 </header>

 <div class="about center part clearfix">
  <header class="title">
    <h3 class="fleft">Contents</h3>
  </header>
  <aside class="column4 mright">
    <menu>
     <ul>
      <li><a href="#navily" class="sec"> a </a></li>
      <br>			
      <li><a href="https://deadlink.com" class="button"> Download as PDF </a></li>	
     </ul>
    </menu>
  </aside>
  <section class="columnthird content"> <h1 class="mright">USING YACC WITH LEX</h1>
   <article id="navily" class="detail">
   <h2>Integrating LEX with YACC</h2>
   <h3>LEX->YACC Communication</h3>
     <p> In the previous documents, we have noted that YACC is used to generate a parser (<a href = "http://silcnitc.github.io/yacc.html">YACC documentation</a>) and LEX is used to generate a lexical analayzer (<a href = "http://silcnitc.github.io/lex.html">LEX documentation</a>). YACC generates the definition for yyparse() in y.tab.c and LEX generates the definition for yylex() in lex.yy.c. We have also noted that yyparse() repetitively calls yylex() to read tokens from the input stream. Till now, for simplicity we had written a user-defined yylex() in the YACC program. In this section of the document we will use LEX to generate the definition of yylex() and make YACC use this definition for retrieving tokens. </p>
     <h4>Including lex.yy.c in y.tab.c</h4>
     <p>This can be done by <i>including</i> the lex.yy.c file in the auxiliary functions section of the YACC program as shown below. (This results in all of the contents of lex.yy.c including the yylex() definition being copied to y.tab.c) </p>
     <div class="syntax">
      <pre>
		/* Declarations section */
	%%
		/* Rules */
	%%
	#include "lex.yy.c"

		/* Auxiliary Functions */    
         </pre>
	</div>
	<h4>Providing multiple arguments to gcc</h4>
	 <div class="syntax">
        user@localhost:~$ gcc y.tab.c lex.yy.c 
      </div>
	
    <h3>YACC->LEX Communication</h3>
     <p>Recall that yyparse() attempts to parse the given input by calling yylex() to obtain tokens. In an <a href="yacc.html#navexy1">example</a> in the YACC documentation, we had used a user defined definition of yylex() in the YACC program. The YACC program consists of the declaration of token DIGIT in the <a href="yacc.html#navexy1d">declarations section</a> and definition of the token DIGIT in the <a href="yacc.html#navexy1a">auxiliary functions section</a> under the definition of yylex(). Now we are trying to use the LEX generated yylex() instead of a user defined yylex(). We know that LEX generates the definition for the DIGIT token under yylex() according to the rules in the LEX program and yyparse() calls yylex() to find DIGIT in the input stream. Thus we may infer that all the tokens in the <a href="yacc.html#navintro">CFG</a> must be declared in the YACC program (to be used in the CFG) and defined in the LEX program (to be identified by yylex()). <br><br> This example shows the declaration of the token DIGIT in the YACC program:</p>
     <div class="syntax">
      <pre>
		/* YACC Declarations */
	
	%token DIGIT

	%%
		/* Rules */
	%%
		/* YACC Auxiliary Functions */    
      </pre>
	</div>
	<p> This example shows the definition of the token DIGIT in the LEX program:</p>
	<div class="syntax">
     <pre>
		/* LEX Declarations */

	%%
	
	"+"     return PLUS;
	
	%%
		/* LEX Auxiliary Functions */    
     </pre>
    </div>
    <p> In the above examples we can see that a YACC program contains the declarations of a token while LEX contains the definition of a token. But for LEX to identify the declared tokens, there must exist some way in which YACC communicates the declared tokens to LEX. This communication from a YACC program to a LEX program is established through a file named "y.tab.h" which contains the declarations of all the tokens in YACC. The "y.tab.h" is automatically generated by YACC when the yacc command is executed with the -d flag in the terminal.</p>
    <div class="syntax">
		user@localhost:~$ yacc -d yaccprogram.y   
    </div>
    <p>The example of the contents of y.tab.h file is shown below. 
    <div class="syntax">
        #define DIGIT  253  
     </div>   
     <p>Note that '253' is a YACC generated constant to represent PLUS.</p>  
    <p>The y.tab.h file is <i>included</i> in the declarations section of the LEX program. As a result of which, LEX has access to the declarations in the YACC file. Note that in the following example of a LEX program, no explicit definition of the token PLUS is requied as y.tab.h (which contains the declaration of PLUS) has been included in the declarations section</p>
    <div class="syntax">
	 <pre>
	#include "y.tab.h"

	%%
	
	"+"     return PLUS;
	
	%%
		/* LEX Auxiliary Functions */    
     </pre>   
    </div>
    
    <div class="up grid col-one-third" style="float:right">
			<a href="#navtop" title="Go back up"> top â†‘</a>
	</div>
   </article>
  </section>
 </div>
<footer class="center part clearfix">
<ul class="social column3 mright">
    <li><a href="https://github.com/silcnitc">Github</a></li>
</ul>
  <div class="up column3 mright"> <a href="#navtop" class="ir">Go up</a> </div>
  <nav class="column3">
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="uc.html">Contact</a></li>
    </ul>
  </nav>
</footer>
<script src="http://code.jquery.com/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/jquery-1.5.1.min.js"><\/script>')</script>
<script src="js/scripts.js"></script>
<!--[if (gte IE 6)&(lte IE 8)]>
<script src="js/selectivizr.js"></script>
<![endif]-->
</body>
</html>
